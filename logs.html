<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Content Security Policy -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; img-src 'self' data: https://maps.googleapis.com https://*.gstatic.com; script-src 'self' 'unsafe-inline' https://maps.googleapis.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; connect-src 'self' https://maps.googleapis.com https://places.googleapis.com; font-src 'self' data: https://fonts.gstatic.com; frame-src 'none'; object-src 'none'; base-uri 'self'; form-action 'self';">
    
    <title>ğŸ› ãƒ­ã‚° - ã‚»ã‚«ã‚«ãƒ¬</title>
    <meta name="description" content="ã‚ãªãŸã®ã‚«ãƒ¬ãƒ¼æ—…ãƒ­ã‚°ã‚’æ™‚ç³»åˆ—ã§æŒ¯ã‚Šè¿”ã‚‹">

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/assets/icons/favicon.ico" sizes="any">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16x16.png">

    <!-- Apple Touch Icon -->
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-touch-icon.png">

    <!-- Theme Color -->
    <meta name="theme-color" content="#ff6b00">

    <!-- CSSãƒ•ã‚¡ã‚¤ãƒ« -->
    <link rel="stylesheet" href="assets/css/logs.css">

    <!-- å…±é€šãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ï¼ˆXSSå¯¾ç­–ï¼‰ -->
    <script src="assets/js/utils.js"></script>

    <!-- è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆConfigï¼‰ -->
    <script src="assets/js/config.js"></script>

    <!-- ã‚«ã‚¹ã‚¿ãƒ åœ°ç‚¹ç®¡ç†JS -->
    <script src="assets/js/custom-points.js"></script>

    <!-- ãƒ­ã‚°ãƒšãƒ¼ã‚¸JS -->
    <script src="assets/js/logs.js"></script>

    <!-- ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼JS -->
    <script src="assets/js/menu.js"></script>

    <!-- Google Analytics 4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', Config.GA_ID);
    </script>
</head>
<body>
    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <div class="header">
        <h1>ğŸ› ãƒ­ã‚°</h1>
        <p class="subtitle">
            <span id="visitCount">0</span>æ¯ã®ã‚«ãƒ¬ãƒ¼å±¥æ­´<br>
            <span id="dateRange"></span>
        </p>

        <!-- ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒœã‚¿ãƒ³ -->
        <button class="hamburger" id="hamburgerBtn" aria-label="ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‹ã" aria-expanded="false">
            <span></span>
            <span></span>
            <span></span>
        </button>
    </div>

    <!-- ä¸¦ã³æ›¿ãˆã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ« -->
    <div class="sort-controls">
        <label for="sortSelect">ä¸¦ã³æ›¿ãˆ:</label>
        <select id="sortSelect" class="sort-dropdown" aria-label="ãƒ­ã‚°ã®ä¸¦ã³æ›¿ãˆé †ã‚’é¸æŠ">
            <option value="date-desc" selected>æ—¥ä»˜é †ï¼ˆæ–°â†’æ—§ï¼‰</option>
            <option value="date-asc">æ—¥ä»˜é †ï¼ˆæ—§â†’æ–°ï¼‰</option>
            <option value="region">åœ°åŸŸåˆ¥</option>
            <option value="visit-count">å†è¨ªå›æ•°é †</option>
        </select>
    </div>

    <!-- ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ -->
    <div class="menu-overlay" id="menuOverlay" aria-hidden="true"></div>

    <!-- ã‚¹ãƒ©ã‚¤ãƒ‰ãƒ¡ãƒ‹ãƒ¥ãƒ¼ -->
    <nav class="slide-menu" id="slideMenu" aria-label="ãƒ¡ã‚¤ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼" aria-hidden="true">
        <button class="menu-close" id="menuClose" aria-label="ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‰ã˜ã‚‹">Ã—</button>
        <ul class="menu-list">
            <li><a href="/">ğŸ  ãƒ›ãƒ¼ãƒ </a></li>
            <li><a href="/logs.html">ğŸ› ãƒ­ã‚°</a></li>
            <li><a href="/privacy.html">ğŸ”’ ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</a></li>
            <li><a href="#" id="aboutLink">â„¹ï¸ ã‚»ã‚«ã‚«ãƒ¬ã«ã¤ã„ã¦</a></li>
            <li><a href="https://x.com/sekakare" target="_blank" rel="noopener noreferrer">ğ• å…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ</a></li>
        </ul>
    </nav>

    <!-- ã‚³ãƒ³ãƒ†ãƒŠ -->
    <div class="container">
        <div id="logsContainer">
            <!-- ãƒ­ã‚°ã¾ãŸã¯ Empty State ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã‚‹ -->
        </div>
    </div>

    <!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
    <footer class="footer">
        <div class="footer-content">
            <p>&copy; <span id="footer-year">2024</span> ã‚»ã‚«ã‚«ãƒ¬. All rights reserved.</p>
            <p><a href="privacy.html">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</a></p>
        </div>
    </footer>

    <!-- ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="editModal" class="edit-modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle" style="display: none;">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <button class="modal-close" aria-label="é–‰ã˜ã‚‹">Ã—</button>
            <h2 id="modalTitle">è¨ªå•è¨˜éŒ²ã‚’ç·¨é›†</h2>

            <div class="form-group">
                <label>åº—å</label>
                <p class="readonly" id="modalStoreName"></p>
            </div>

            <div class="form-group">
                <label for="modalVisitedAt">è¨ªå•æ—¥ï¼ˆä»»æ„ï¼‰</label>
                <input type="date" id="modalVisitedAt" max="">
            </div>

            <div class="form-group">
                <label for="modalMenu">ãƒ¡ãƒ‹ãƒ¥ãƒ¼</label>
                <input type="text" id="modalMenu" placeholder="ä¾‹: ãƒã‚­ãƒ³ã‚«ãƒ¬ãƒ¼ï¼ˆè¾›å£ï¼‰">
            </div>

            <div class="form-group">
                <label for="modalMemo">ä¸€è¨€ãƒ¡ãƒ¢</label>
                <textarea id="modalMemo" rows="4" placeholder="æ€ã„å‡ºã‚„æ°—ä»˜ãã‚’è¨˜éŒ²..."></textarea>
            </div>

            <!-- å†™çœŸã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
            <div class="form-group">
                <label for="modalPhotoInput">ğŸ“· å†™çœŸï¼ˆæœ€å¤§3æšï¼‰</label>
                <input 
                    type="file" 
                    id="modalPhotoInput" 
                    accept="image/jpeg,image/jpg,image/png,image/webp"
                    style="display: none;"
                    aria-label="å†™çœŸã‚’é¸æŠ">
                
                <div class="photo-upload-area">
                    <div id="photoPreviewContainer" class="photo-preview-container">
                        <!-- å†™çœŸãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã‚‹ -->
                    </div>
                    <button type="button" id="addPhotoBtn" class="btn-add-photo" aria-label="å†™çœŸã‚’è¿½åŠ ">
                        <span class="add-photo-icon">ğŸ“·</span>
                        <span class="add-photo-text">å†™çœŸã‚’è¿½åŠ </span>
                    </button>
                </div>
                <p class="photo-help-text">JPEG, PNG, WebPå½¢å¼ã€‚è‡ªå‹•ã§åœ§ç¸®ã•ã‚Œã¾ã™ã€‚</p>
            </div>

            <div class="modal-actions">
                <button class="btn-cancel" id="modalCancel">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                <button class="btn-save" id="modalSave">ä¿å­˜</button>
            </div>
        </div>
    </div>

    <!-- ç”»åƒæ‹¡å¤§ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="imageViewModal" class="image-view-modal" role="dialog" aria-modal="true" style="display: none;">
        <div class="image-modal-overlay"></div>
        <div class="image-modal-content">
            <button class="image-modal-close" aria-label="é–‰ã˜ã‚‹">Ã—</button>
            <button class="image-nav-prev" aria-label="å‰ã®ç”»åƒ" style="display: none;">â€¹</button>
            <img id="imageViewImg" src="" alt="æ‹¡å¤§è¡¨ç¤º">
            <button class="image-nav-next" aria-label="æ¬¡ã®ç”»åƒ" style="display: none;">â€º</button>
            <div class="image-counter" id="imageCounter" style="display: none;">1 / 1</div>
        </div>
    </div>

    <script>
        // ãƒ•ãƒƒã‚¿ãƒ¼ã®è‘—ä½œæ¨©å¹´ã‚’å‹•çš„ã«è¨­å®š
        document.addEventListener('DOMContentLoaded', function() {
            const footerYear = document.getElementById('footer-year');
            if (footerYear) {
                footerYear.textContent = new Date().getFullYear();
            }
        });
    </script>
</body>
</html>