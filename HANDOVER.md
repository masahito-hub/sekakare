# 🍛 セカカレ プロジェクト引き継ぎドキュメント

**最終更新**: 2025-10-18  
**現在のバージョン**: v0.4.0  
**Phase**: 1-B（ほぼ完了）

このドキュメントは、Claudeチャット間での引き継ぎをスムーズにするための総合ガイドです。

---

## 📋 目次

1. [プロジェクト概要](#プロジェクト概要)
2. [現在の状況](#現在の状況)
3. [運用ルール](#運用ルール)
4. [開発ワークフロー](#開発ワークフロー)
5. [重要なドキュメントリンク](#重要なドキュメントリンク)
6. [次のステップ](#次のステップ)
7. [よくある作業パターン](#よくある作業パターン)

---

## プロジェクト概要

### 🎯 セカカレとは
**セカカレ**は、食べたカレーを地図上に記録して、自分だけのカレーマップを作成できるWebアプリケーションです。

- **技術スタック**: Vanilla JavaScript, HTML, CSS
- **ホスティング**: GitHub Pages
- **データ保存**: localStorage（将来的にIndexedDB移行検討）
- **外部API**: Google Maps API

### 🌐 リンク
- **本番環境**: https://masahito-hub.github.io/sekakare/
- **リポジトリ**: https://github.com/masahito-hub/sekakare
- **公式X**: https://x.com/sekakare

---

## 現在の状況

### ✅ 完了したPhase

#### Phase 1-A: コア機能（v0.1.0）
- Google Maps連携
- 店舗検索・保存
- 基本的なログ管理

#### Phase 1-B: ログ詳細機能強化
- ✅ **v0.1.1** - 編集モーダルUI（Issue #94, #95）
- ✅ **v0.2.0** - メニュー・メモ機能（Issue #100, #106, #108）
- ✅ **v0.3.0** - 並び替え機能（Issue #110, #111）
- ✅ **v0.4.0** - 写真アップロード機能（Issue #116, #117）
- ✅ **Phase 1-B-5** - CSPヘッダー追加（Issue #119, PR #121）
- 📝 **Phase 1-B-6** - 自動テスト環境構築（Issue #118）

### 📝 進行中・予定

#### Phase 1-C: 統計・分析機能（未着手）
- 訪問統計ダッシュボード
- 都道府県別集計
- 再訪店舗ランキング

#### Phase 2: データ管理・分析（Issue化済み）
- パフォーマンス最適化（Issue #120）
  - 仮想スクロール
  - 画像遅延読み込み
  - IndexedDB移行検討
- エクスポート/インポート機能
- 高度な検索機能

#### Phase 3: PWA化
- Service Worker実装
- オフライン対応
- v1.0.0正式リリース

---

## 運用ルール

### 📝 RELEASE_LOG.md 更新ルール

**ファイル**: `docs/RELEASE_LOG.md`

#### 1. 新機能リリース時

```markdown
## [vX.Y.Z] - YYYY-MM-DD

### ✨ 新機能
- **機能名**（Phase X-Y-Z）
  - 機能詳細1
  - 機能詳細2
  - (#Issue番号, #PR番号)

### 🔒 セキュリティ強化
- 実装内容

### 🔧 改善
- 改善内容

### 🐛 バグ修正
- 修正内容
```

#### 2. バージョン番号ルール（Semantic Versioning）

- **Major (X.0.0)**: 破壊的な変更、大規模なアーキテクチャ変更
- **Minor (0.X.0)**: 新機能の追加、後方互換性あり
- **Patch (0.0.X)**: バグ修正、小さな改善

#### 3. Phase別バージョン戦略

- **v0.x.x**: MVP開発フェーズ（Phase 1-3）
- **v1.x.x**: 正式リリース（Phase 3完了後）
- **v2.x.x**: ソーシャル機能追加（Phase 4）

#### 4. 更新タイミング

- PRマージ後、即座に更新
- 複数PRをまとめてリリースする場合は最後にまとめて更新
- `[Unreleased]` セクションは将来予定のみ記載

### 🔄 開発フロー

#### 1. Issue作成
```markdown
## 📋 概要
機能の説明

## 🎯 目的
なぜこの機能が必要か

## 📝 実装内容
具体的な実装内容

## ✅ 完了条件
- [ ] 項目1
- [ ] 項目2
```

#### 2. ブランチ命名規則
- 機能追加: `feature/機能名` (例: `feature/photo-upload`)
- バグ修正: `fix/バグ内容` (例: `fix/sort-display-bug`)
- ドキュメント: `docs/内容` (例: `docs/update-readme`)

#### 3. PR作成
```markdown
## 📋 概要
Phase X-Y: 機能の説明

## ✨ 実装内容
- 実装1
- 実装2

## ✅ テスト項目
- [x] テスト1
- [x] テスト2

Closes #Issue番号
```

#### 4. マージ後
1. Issue をクローズ
2. `RELEASE_LOG.md` を更新
3. 必要に応じて他のドキュメント更新

### 📊 Issue管理ルール

#### ラベル体系
- `Phase 1-A`, `Phase 1-B`, `Phase 1-C`: フェーズ別
- `enhancement`: 新機能
- `bug`: バグ修正
- `documentation`: ドキュメント更新
- `security`: セキュリティ関連

#### 優先度の判断
- 🔴 **Critical**: セキュリティ、重大なバグ → 即座対応
- 🟡 **High**: ユーザー影響大 → 当該Phase内で対応
- 🟢 **Medium**: 改善・新機能 → 計画的に対応
- 🔵 **Low**: 将来対応、最適化 → 別Issue化

---

## 開発ワークフロー

### 🚀 標準的な機能追加フロー

```bash
1. Issue作成（機能要望・仕様確認）
   ↓
2. ブランチ作成（feature/xxx）
   ↓
3. 実装・コミット
   ↓
4. PR作成
   ↓
5. レビュー・修正
   ↓
6. マージ
   ↓
7. Issue クローズ
   ↓
8. RELEASE_LOG.md 更新
   ↓
9. 必要に応じてバージョンタグ作成
```

### 🔧 コードレビュー時の確認ポイント

#### セキュリティ
- [ ] XSS対策（`escapeHtml()` の使用）
- [ ] Base64データの検証（`isValidBase64Image()`）
- [ ] CSP違反がないか

#### コード品質
- [ ] 関数の責任分離（小さく再利用可能）
- [ ] エラーハンドリング（ユーザーフレンドリーなメッセージ）
- [ ] `parseInt` には基数を指定（`parseInt(x, 10)`）

#### アクセシビリティ
- [ ] ARIA属性の適切な使用
- [ ] キーボード操作対応
- [ ] 適切なコントラスト比

#### パフォーマンス
- [ ] 不要な再レンダリングを避ける
- [ ] 大量データでの動作確認
- [ ] localStorage容量の考慮

---

## 重要なドキュメントリンク

### 📚 プロジェクトドキュメント

| ドキュメント | 説明 | パス |
|------------|------|------|
| **RELEASE_LOG.md** | リリース履歴・バージョン管理 | `docs/RELEASE_LOG.md` |
| **PROJECT_GOALS.md** | プロジェクト目標・ロードマップ | `docs/PROJECT_GOALS.md` |
| **SYSTEM_SPEC.md** | システム仕様書 | `SYSTEM_SPEC.md` |
| **README.md** | プロジェクト概要 | `README.md` |

### 🔗 外部リソース

- [Google Maps API ドキュメント](https://developers.google.com/maps)
- [localStorage API](https://developer.mozilla.org/ja/docs/Web/API/Window/localStorage)
- [Content Security Policy](https://developer.mozilla.org/ja/docs/Web/HTTP/CSP)
- [OWASP XSS Prevention](https://cheatsheetseries.owasp.org/cheatsheets/Cross_Site_Scripting_Prevention_Cheat_Sheet.html)

---

## 次のステップ

### 🎯 優先順位順の推奨アクション

#### 1. Phase 1-B-6: 自動テスト環境構築（Issue #118）
**優先度**: High  
**期間**: 2-3日

- Jest/Vitest導入
- ユニットテスト作成（`utils.js`, localStorage操作）
- E2Eテスト（Cypress/Playwright）
- CI/CDパイプライン構築

**完了条件**:
- [ ] テストフレームワーク導入
- [ ] カバレッジ60%以上
- [ ] GitHub Actions設定

#### 2. Phase 1-C: 統計・分析機能
**優先度**: Medium  
**期間**: 1週間

- 訪問統計ダッシュボード
- 都道府県別集計
- 再訪店舗ランキング
- グラフ表示（Chart.js）

**Issue作成が必要**

#### 3. Phase 2: パフォーマンス最適化（Issue #120）
**優先度**: Low（100件以上のログができてから）  
**期間**: 1-2週間

- 仮想スクロール実装
- 画像遅延読み込み
- IndexedDB移行検討

---

## よくある作業パターン

### 📝 新機能追加の手順

```markdown
1. **Issue作成**
   - テンプレートに従って詳細を記述
   - 適切なラベル・Phase設定

2. **ブランチ作成**
   - `feature/機能名` で作成

3. **実装**
   - 必要に応じてスキルファイル確認
   - セキュリティ・アクセシビリティを考慮

4. **PR作成**
   - 詳細な説明を記載
   - `Closes #Issue番号` を記載

5. **マージ後**
   - Issue クローズ
   - RELEASE_LOG.md 更新
```

### 🐛 バグ修正の手順

```markdown
1. **Issue確認**
   - バグの再現手順確認
   - 既知の問題セクションをチェック

2. **ブランチ作成**
   - `fix/バグ内容` で作成

3. **修正・テスト**
   - 根本原因を特定
   - 再発防止策を検討

4. **PR作成**
   - 修正内容と原因を記載

5. **マージ後**
   - RELEASE_LOG.md の「既知の問題」から削除
   - 「バグ修正」セクションに追加
```

### 🔄 RELEASE_LOG.md の更新パターン

```markdown
# パターン1: 新バージョンリリース
1. `[Unreleased]` の下に新しいバージョンセクション追加
2. 実装内容を各カテゴリに分類
3. Issue/PR番号を記載
4. バージョン番号とフッターを更新

# パターン2: 既知の問題の更新
1. バグ発見時: 「既知の問題」セクションに追加
2. バグ修正時: 「既知の問題」から削除 + 該当バージョンの「バグ修正」に追加

# パターン3: 将来対応のIssue化
1. 「📝 予定」セクションに追加
2. Issue番号をリンク
```

### 🔍 コードレビュー実施時

```markdown
1. **Critical Issues（即座対応必須）**
   - XSS脆弱性
   - 重大なセキュリティホール
   - データ損失の可能性

2. **Warning Issues（PR内で対応推奨）**
   - アクセシビリティ問題
   - コード品質問題
   - パフォーマンス懸念

3. **Future Issues（別Issue化）**
   - 大規模リファクタリング
   - パフォーマンス最適化
   - 追加機能提案
```

---

## 📊 現在のプロジェクト統計

- **総Issueクローズ数**: 約15件（Phase 1-B完了）
- **総PR数**: 約15件
- **現在のバージョン**: v0.4.0
- **コードベース**: ~3,000行（推定）
- **主要機能数**: 8つ
  1. Google Maps連携
  2. 店舗検索・保存
  3. ログ一覧表示
  4. 編集機能
  5. メニュー・メモ機能
  6. 並び替え機能
  7. 写真アップロード機能
  8. CSPセキュリティ

---

## 🔔 重要な注意事項

### ⚠️ やってはいけないこと

1. **mainブランチへの直接コミット**
   - 必ずPRを経由すること

2. **RELEASE_LOG.md の更新忘れ**
   - PRマージ後は必ず更新

3. **セキュリティ対策の省略**
   - XSS対策は必須
   - CSP違反チェック

4. **後方互換性を壊す変更**
   - localStorageのデータ構造変更時は移行スクリプト必須

### ✅ 推奨事項

1. **小さく頻繁にコミット**
   - 1機能1PRを基本とする

2. **ドキュメントの同時更新**
   - コード変更時はドキュメントも更新

3. **テストの追加**
   - 新機能にはテストを追加（Issue #118完了後）

4. **ユーザー視点の確認**
   - モバイルでの動作確認
   - 初心者でも使えるUI

---

## 🎓 新しいClaudeへの引き継ぎ方法

このドキュメントを新しいチャットで共有する際:

1. **最初に伝えること**:
   ```
   セカカレプロジェクトの引き継ぎをお願いします。
   HANDOVER.md を確認してください。
   ```

2. **現在の状況を伝える**:
   - 最後に作業した内容
   - 途中で止まっている作業があれば明記

3. **次のタスクを明確にする**:
   - Issue番号を指定
   - または「次のステップ」セクションを参照

---

## 📞 連絡先・サポート

- **開発者**: [@masahito-hub](https://github.com/masahito-hub)
- **公式X**: [@sekakare](https://x.com/sekakare)
- **Issues**: [GitHub Issues](https://github.com/masahito-hub/sekakare/issues)

---

## 🎉 最後に

セカカレは、カレー好きのためのアプリです。開発を楽しみながら、ユーザーに価値を提供していきましょう！

**次回のClaudeへ**: このドキュメントを確認して、スムーズに開発を続けてください 🍛✨

---

**最終更新**: 2025-10-18  
**更新者**: Claude (引き継ぎ10回目)  
**次回更新時**: Phase 1-B-6完了時、または重要な変更時
